@page "/"

<PageTitle>Insertion Sort</PageTitle>

@* https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_grid_layout/Basic_concepts_of_grid_layout *@

<div class="d-flex gap-3 mb-3">
    @for (int i = 0; i < pole.Length; i++)
    {
        <div class="fs-1">@pole[i]</div>
    }
</div>


<button class="btn btn-primary" @onclick="DalsiIterace">Next Iteration</button>

<div class="rz-p-0 rz-p-md-12">
    <RadzenChart>
        <RadzenColumnSeries  Data="@Data" CategoryProperty="Caption" ValueProperty="Data">
            <RadzenSeriesDataLabels Visible="true" />
        </RadzenColumnSeries>
        <RadzenLegend Visible="false" />
    </RadzenChart>
</div>

@code {
    record DataItem(string Caption, double Data);

    DataItem[] Data => pole.Select((x, i) => new DataItem((i + 1).ToString(), x)).ToArray();

    private int[] pole = [4, 3, 9, 2, 7, 1, 5];

    int i;
    int j;
    int prvek;

    protected override void OnInitialized()
    {
        i = 0;
        j = i + 1;
        prvek = pole[j];
    }

    void DalsiIterace()
    {
        // Shift element to the right
        if((j > 0) && prvek < pole[j - 1])
        {
            pole[j] = pole[j - 1];
            j--;

            // Place the element in its correct position
            pole[j] = prvek;
        }

        // If we are done or prvek is greater than or equal to previous element, prepare for the next iteration
        if (j <= 0 || prvek >= pole[j - 1])
        {
            ++i;

            j = i + 1;
            prvek = pole[j];
        }
    }
}
